let questions = [
    {
        "question": "Wie heißt die Waffe der Jedi-Ritter?",
        "answer_1": "Blaster",
        "answer_2": "Zwille",
        "answer_3": "Pistole",
        "answer_4": "Lichtschwert",
        "right_answer": 4
    },
    {
        "question": "Wer ist der Vater von Luke Skywalker?",
        "answer_1": "Sheev Palpatine",
        "answer_2": "Darth Vader",
        "answer_3": "Darth Maul",
        "answer_4": "Anakin Skywalker",
        "right_answer": 2
    },
    {
        "question": "Wie heißt das Raumschiff von Han Solo?",
        "answer_1": "Razor Crest",
        "answer_2": "Supremacy",
        "answer_3": "Millennium Falke",
        "answer_4": "Executor",
        "right_answer": 3
    },
    {
        "question": "Mit welchen Worten verabschieden sich Jedi-Ritter?",
        "answer_1": "Bis bald!",
        "answer_2": "Und Tschüss!",
        "answer_3": "Bye Bye",
        "answer_4": "Möge die Macht mit dir sein",
        "right_answer": 4
    },
    {
        "question": "Was für ein Wesen ist Chewbacca?",
        "answer_1": "Wookie",
        "answer_2": "Tusken-Räuber",
        "answer_3": "Twi'lek",
        "answer_4": "Mensch",
        "right_answer": 1
    },
    {
        "question": "Leia ist die Schwester von?",
        "answer_1": "Han Solo",
        "answer_2": "Luke Skywalker",
        "answer_3": "Obi-Wan Kenobi",
        "answer_4": "Yoda",
        "right_answer": 2
    },
    {
        "question": "Welcher Sith kämpft mit einem Doppel-Laserschwert?",
        "answer_1": "Darth Vader",
        "answer_2": "Darth Sidious",
        "answer_3": "Darth Maul",
        "answer_4": "Darth Caedus",
        "right_answer": 3
    },
    {
        "question": "Wie heißt der Freund von C-3PO ?",
        "answer_1": "BB-8",
        "answer_2": "R2-D2",
        "answer_3": "L3-37",
        "answer_4": "IG-11",
        "right_answer": 2
    },
    {
        "question": "Welche Farbe hat Lukes Lichtschwert?",
        "answer_1": "Blau",
        "answer_2": "Lila",
        "answer_3": "Rot",
        "answer_4": "Grün",
        "right_answer": 4
    },
    {
        "question": "Wie heißt der Lehrer von Luke Skywalker?",
        "answer_1": "Obi-Wan Kenobi",
        "answer_2": "Yoda",
        "answer_3": "Qui-Gon Jinn",
        "answer_4": "Boba Fett",
        "right_answer": 2
    },
    {
        "question": "Was ist mit Anakin Skywalker während des Kampfes mit Graf Dooku passiert?",
        "answer_1": "Er verlor sein linkes Bein",
        "answer_2": "Er verlor seinen rechten Arm",
        "answer_3": "Er verlor sein rechtes Bein",
        "answer_4": "Er hat verloren",
        "right_answer": 2
    },
    {
        "question": "Was hat Luke Skywalker in seinem Kampf mit Darth Vader verloren?",
        "answer_1": "Seine linke Hand",
        "answer_2": "Sein linker Fuß",
        "answer_3": "Seine rechte Hand",
        "answer_4": "Er hat verloren",
        "right_answer": 3
    },
    {
        "question": " Wo haben die Klonkriege begonnen?",
        "answer_1": "Tatooine",
        "answer_2": "Geonose",
        "answer_3": "Naboo",
        "answer_4": "Coruscan",
        "right_answer": 2
    },
    {
        "question": "Was ist Chewbaccas bevorzugte Waffe?",
        "answer_1": "Blastergewehr",
        "answer_2": "Lichtschwert",
        "answer_3": "Metal Club",
        "answer_4": "Bowcaster",
        "right_answer": 4
    },
    {
        "question": "Wie heißt der stachelige Sith-Lord mit einem coolen Doppelklingen-Lichtschwert?",
        "answer_1": "Darth Vader",
        "answer_2": "Darth Maul",
        "answer_3": "Dart Paul",
        "answer_4": "Dart Garth",
        "right_answer": 2
    },
    {
        "question": "Wer hat den ersten Todesstern in die Luft gesprengt und mit welcher Waffe?",
        "answer_1": "Luke Skywalker mit seinem Lichtschwert",
        "answer_2": "Prinzessin Leia mit einem X-Wing",
        "answer_3": "Luke Skywalker mit einem X-Wing",
        "answer_4": "Prinzessin Leia mit einem thermischen Zünder",
        "right_answer": 3
    },
    {
        "question": "Womit entfachte Yoda das Feuer um die Baumbibliothek abzubrennen?",
        "answer_1": "Mit einem Machtblitz",
        "answer_2": "Mit einer Fackel",
        "answer_3": "Mit einem Machtfeuerball",
        "answer_4": "Mit einem kleinen Funken",
        "right_answer": 1
    },
    {
        "question": " Was ist der echte Name des Mandalorianer?",
        "answer_1": "Dean Withlow",
        "answer_2": "Seam Lavill",
        "answer_3": "George Wath",
        "answer_4": "Din Djarin",
        "right_answer": 4
    },
    {
        "question": "Wer hat Qui-Gon Jinn getötet?",
        "answer_1": "Darth Sidious",
        "answer_2": "Darth Maul",
        "answer_3": "Darth Plagueis",
        "answer_4": "Darth Bane",
        "right_answer": 2
    },
    {
        "question": "Wie heißt die Spezies welcher Yoda angehört?",
        "answer_1": "Sie ist unbekannt",
        "answer_2": "Jawas",
        "answer_3": "Hatten",
        "answer_4": "Graanlings",
        "right_answer": 1
    },
    {
        "question": "Wem will Leia in Episode 4. einen Hilferuf senden?",
        "answer_1": "Obi-Wan Kenobi",
        "answer_2": "Luke Skywalker",
        "answer_3": "Senator Organa",
        "answer_4": "Yoda",
        "right_answer": 1
    },
    {
        "question": "Wer war der Vater von Kylo Ren?",
        "answer_1": "Darth Vader",
        "answer_2": "Snoke",
        "answer_3": "Luke Skywalker",
        "answer_4": "Han Solo",
        "right_answer": 4
    },
    {
        "question": "Welche Farbe hat Mace Windus Lichtschwert?",
        "answer_1": "Lila",
        "answer_2": "Pink",
        "answer_3": "Rosa",
        "answer_4": "Helles Rot",
        "right_answer": 1
    },
    {
        "question": "Welche Spezies produziert die Klon-Armee in Episode II?",
        "answer_1": "Kaminoaner",
        "answer_2": "Wookies",
        "answer_3": "Corellianer",
        "answer_4": "Toydarianer",
        "right_answer": 1
    },
    {
        "question": "Welche Auftragskillerin wollte Senatorin Amidala in Episode II umbringen?",
        "answer_1": "Bobabine Fett",
        "answer_2": "Zam Wesell",
        "answer_3": "Maz Kanata",
        "answer_4": "Ley Fugora",
        "right_answer": 2
    },
];

let currentQuestion = 0;
let rightQuestions = 0;
let AUDIO_SUCCES = new Audio('sounds/correct.mp3')
let AUDIO_FAIL = new Audio('sounds/incorrect.mp3')

function init(){
    document.getElementById('showArrayLength').innerHTML = questions.length;
    showQuestion();
}

function showQuestion(){
    if(gameIsOver()){ // if true
        showEndScreen();
    }else{ // if false
        updateProgressBar();
        updateToNextQuestion();
    }
}

function gameIsOver(){
   return currentQuestion >= questions.length; // returns true or false
}

function showEndScreen(){
        document.getElementById('endScreen').style = '';
        document.getElementById('question_body').style = 'display: none';
        document.getElementById('showArrayLength1').innerHTML = questions.length;
        document.getElementById('rightAnswers').innerHTML = rightQuestions;
        document.getElementById('endImage').src="images/fireworks.jpg";
} 

function updateToNextQuestion(){
    let question = questions[currentQuestion];
    document.getElementById('current_question'). innerHTML = currentQuestion+1;
    document.getElementById('questionText').innerHTML = question['question'];
    document.getElementById('answer_1').innerHTML = question['answer_1'];
    document.getElementById('answer_2').innerHTML = question['answer_2'];
    document.getElementById('answer_3').innerHTML = question['answer_3'];
    document.getElementById('answer_4').innerHTML = question['answer_4'];
}

function updateProgressBar(){
    let percent = (currentQuestion +1) / questions.length;
    percent = Math.round(percent * 100);
    document.getElementById('progress_bar'). innerHTML = `${percent} %`;
    document.getElementById('progress_bar').style = `width: ${percent}%`; 
}

function answer(selection){ // gibt answer_x je nach Antwort aus. 
let rightAnswer = questions[currentQuestion]['right_answer']; // Zeigt die Zahl der richtigen Antwort.  "1-4"
let selectedQuestionNumber = selection.slice(-1); // kürzt z.B. answer_1 bis zur letzten Stelle. Dadurch bleibt nur die Zahl übrig, die mit der Zahl der richtigen Antwort verglichen werden kann. 
let idOfRightAnswer = `answer_${rightAnswer}` // generate correct ID

if(rightAnswerSelected(selectedQuestionNumber, rightAnswer)){ 
    document.getElementById(selection).parentNode.classList.add('bg-success');
    AUDIO_SUCCES.play(); 
    rightQuestions++;
}else{ 
    document.getElementById(selection).parentNode.classList.add('bg-danger'); // shows wrong answer
    document.getElementById(idOfRightAnswer).parentNode.classList.add('bg-success'); // shows correct answer
    AUDIO_FAIL.play();
}
    document.getElementById('next_question').disabled = false; // makes button usable
}

function rightAnswerSelected(selectedQuestionNumber, rightAnswer){
    return selectedQuestionNumber == rightAnswer;
}

function nextQuestion(){
    currentQuestion++; // erhöht den Wert um 1
    document.getElementById('next_question').disabled = true;
    resetAnswerButtons();
    showQuestion();
}

function resetAnswerButtons(){
    document.getElementById('answer_1').parentNode.classList.remove('bg-danger');
    document.getElementById('answer_1').parentNode.classList.remove('bg-success');
    document.getElementById('answer_2').parentNode.classList.remove('bg-danger');
    document.getElementById('answer_2').parentNode.classList.remove('bg-success');
    document.getElementById('answer_3').parentNode.classList.remove('bg-danger');
    document.getElementById('answer_3').parentNode.classList.remove('bg-success');
    document.getElementById('answer_4').parentNode.classList.remove('bg-danger');
    document.getElementById('answer_4').parentNode.classList.remove('bg-success');
}

function restartGame(){
    document.getElementById('endImage').src="images/millennium-falcon.jpg";
    document.getElementById('endScreen').style = 'display: none';
    document.getElementById('question_body').style = '';
    currentQuestion = 0;
    rightQuestions = 0;
    init();
}